<div class="container">
    <div class="stepper">
        <div class="stepper-steps stepper-steps-isOffset">
            <div class="stepper-step" ngClass="{{step===1 ? 'stepper-step-isValid' : ''}}">
                <div class="stepper-stepContent">
                    <span class="stepper-stepMarker">1</span>Gebruiker
                </div>
            </div>
            <div class="stepper-step" ngClass="{{step===2 ? 'stepper-step-isValid' : ''}}">
                <div class="stepper-stepContent">
                    <span class="stepper-stepMarker">2</span>Bestelling
                </div>
            </div>
            <div class="stepper-step" ngClass="{{step===3 ? 'stepper-step-isValid' : ''}}">
                <div class="stepper-stepContent">
                    <span class="stepper-stepMarker">3</span>Klaar
                </div>
            </div>
        </div>
        <form name="editForm" novalidate role="form" #editForm="ngForm" (ngSubmit)="submitForm()">
            <div class="stepper-content" *ngIf="step===1">
                <fieldset class="form-group">
                    <h2>Geef je gegevens</h2>
                    <div class="form-group">
                        <label for="lastName">Naam*</label>
                        <input required type="text" class="form-control" id="lastName"
                               aria-describedby="lastName" placeholder="Naam"
                               name="lastName" [required]="true"
                               [(ngModel)]="this.customer.user.lastName" #name="ngModel">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Voornaam*</label>
                        <input required type="text" class="form-control" id="firstName"
                               aria-describedby="firstName" placeholder="Voornaam"
                               name="firstName" [required]="true"
                               [(ngModel)]="this.customer.user.firstName">
                    </div>
                    <div class="form-group">
                    <label for="email">Emailadres*</label>
                    <input required type="email" class="form-control" id="email" name="email"
                           aria-describedby="email" placeholder="Emailadres"
                           name="email" [required]="true"
                           [(ngModel)]="this.customer.user.email">
                </div>
                </fieldset>
                <fieldset class="form-group">
                    <legend>Adresgegevens**</legend>
                    <div class="form-group">
                        <label for="street">Straat & nummer</label>
                        <input type="text" (input)="updateLocation($event)" class="form-control" id="street"
                               name="street"
                               [(ngModel)]="customer.street">
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <label for="zip">Postcode</label>
                            <input type="number" class="form-control" id="zip" name="zip"
                                   [(ngModel)]="customer.zipCode">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="city">Stad</label>
                            <input type="text" class="form-control" id="city" name="city"
                                   [(ngModel)]="customer.city">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputState">Provincie</label>
                            <select id="inputState" class="form-control" name="province"
                                    [(ngModel)]="customer.province">
                                <option selected>Kies...</option>
                                <option>Antwerpen</option>
                                <option>Brussel</option>
                                <option>Vlaams-Brabant</option>
                                <option>Waals-Brabant</option>
                                <option>Oost Vlaanderen</option>
                                <option>West Vlaanderen</option>
                                <option>Limburg</option>
                                <option>Luik</option>
                                <option>Henegauwen</option>
                                <option>Namen</option>
                                <option>Luxemburg</option>
                            </select>
                        </div>
                    </div>
                </fieldset>
                <small class="user-form-legend">* verplicht</small>
                <small class="user-form-legend">** verplicht bij levering</small>
                <div class="stepper-actions">
                    <button type="button" class="btn btn-primary" (click)="gotoStepTwo()">
                        Verder
                    </button>
                </div>
            </div>
            <div class="stepper-content" *ngIf="step===2">
                <div class="modal-header">
                    <h4 class="modal-title" id="myProductLabel">
                        <span>Bestelling</span>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-control-label">
                                    Ik wil mijn stuk ophalen
                                </label>
                        <input required class="form-control" checked type="radio" name="deliveryType"
                               [value]="1" (change)="onSelectionChange('PICKUP')"
                               required [(ngModel)]="this.order.deliveryType">
                            </div>
                    <div class="form-group">
                        <label class="form-control-label">
                                    Ik wil mijn stuk thuis bezorgd (€1 per km / max 10 km)
                                </label>
                        <input required class="form-control" type="radio" name="deliveryType"
                               [value]="0" (change)="onSelectionChange('DELIVERED')"
                               [required] [(ngModel)]="this.order.deliveryType">
                                <small class="form-text text-muted">
                                    Levering gaat enkel binnen een straal van 10 kilometer vanuit Sint-Katelijne-Waver.
                                </small>
                            </div>
                    <div class="form-group">
                        <label class="form-control-label">
                            Ik wil een AA-batterij bij de LED-verlichting. (0,5 €)
                        </label>
                        <input class="form-control" type="checkbox" name="led"
                               value="1" (change)="toggleLed()">
                        </div>
                    <div class="form-group">
                        <label for="description">Extra opmerkingen</label>
                        <textarea class="form-control" rows="3"
                                  id="description" name="description"
                                  [(ngModel)]="order.description"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h2>Factuur</h2>
                            <table class="table">
                                <thead>
                                <tr>
                                    <th scope="col">Beschrijving</th>
                                    <th scope="col">Prijs</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>{{this.product.name}}</td>
                                    <td>€ {{this.product.price}}</td>
                                </tr>
                                <tr *ngIf="this.order.includeBatteries">
                                    <td>Batterijen voor LED-licht</td>
                                    <td>€ 0.5</td>
                                </tr>
                                <tr *ngIf="this.order.deliveryType === 'DELIVERED'">
                                    <td>Levering</td>
                                    <td>€ {{this.deliveryPrice}}</td>
                                </tr>
                                <tr class="table-active">
                                    <td>Totaal</td>
                                    <td>€ {{this.price}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="stepper-actions">
                        <button type="button" class="btn btn-light" (click)="this.step=1">
                            Terug
                        </button>
                        <button type="button" class="btn btn-primary" (click)="gotoStepTree()">
                            Verder
                        </button>
                    </div>
                </div>
            </div>
            <div class="stepper-content" *ngIf="step===3">
                <h2>Overzicht bestelling van {{product.name}}</h2>
                <dl class="row">
                    <dt class="col-sm-3">Naam</dt>
                    <dd class="col-sm-9">{{this.customer.user.lastName}}</dd>
                    <dt class="col-sm-3">Voornaam</dt>
                    <dd class="col-sm-9">{{this.customer.user.firstName}}</dd>
                </dl>
                <p>
                    Je zal via mail bevestiging krijgen op {{this.customer.user.email}}.
                </p>
                <div>
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">Beschrijving</th>
                            <th scope="col">Prijs</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>{{this.product.name}}</td>
                            <td>€ {{this.product.price}}</td>
                        </tr>
                        <tr *ngIf="this.order.includeBatteries">
                            <td>Batterijen voor LED-licht</td>
                            <td>€ 0.5</td>
                        </tr>
                        <tr *ngIf="this.order.deliveryType === 'DELIVERED'">
                            <td>Levering</td>
                            <td>€ {{this.deliveryPrice}}</td>
                        </tr>
                        <tr class="table-active">
                            <td>Totaal</td>
                            <td>€ {{this.price}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <p>Gelieve € {{this.price}} over te schrijven op <b>BE12 1234 4567 890</b></p>
                <p *ngIf="this.order.deliveryType === 0">
                    Zodra het geld is overgemaakt zal het stuk worden geleverd in {{customer.street}} te
                    {{customer.city}}.
                </p>

                <p *ngIf="this.order.deliveryType === 1">
                    Zodra het geld is overgemaakt zal je melding krijgen van KranzEnzo voor een afspraak te maken om het
                    stuk te kunnen ophalen.
                </p>
                <a class="btn btn-light" (click)="this.step=2">Terug</a>
                <button type="submit" class="btn btn-success">Verzenden</button>
            </div>
        </form>
    </div>
</div>
